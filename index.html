<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>파주서 차량관리</title>
<style>
  :root{
    --bg1:#fbf6ef;  /* 따뜻한 파스텔 배경(이미지 제거) */
    --bg2:#fffdf9;
    --navy:#113a7a;
    --muted:#6b7280;
    --call:#10b981;
    --holiday:#e63946;
    --select:#facc15;
  }
  html,body{height:100%;margin:0;padding:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
  body{background:linear-gradient(135deg,var(--bg1),var(--bg2));color:#111;-webkit-text-size-adjust:100%}
  .wrap{max-width:920px;margin:18px auto;padding:12px}
  header{background:#fff;padding:12px;border-radius:10px;text-align:center;font-weight:800;color:var(--navy);box-shadow:0 6px 18px rgba(0,0,0,0.04)}
  .banner{margin:12px 0;padding:10px;border-radius:10px;background:#fff7e8;border:1px solid #f1dcc2;font-weight:700;text-align:center}
  .main-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px}
  .btn-main{padding:12px;border-radius:12px;border:0;background:linear-gradient(180deg,var(--navy),#0b2a4a);color:#fff;font-weight:800;cursor:pointer}
  .btn-calendar{background:var(--holiday)}
  .submenu{display:none;margin-top:12px}
  .section-head{font-weight:800;margin-bottom:8px}
  .store-grid{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}
  .store-btn{padding:10px;border-radius:10px;border:0;background:#164a85;color:#fff;font-weight:700;cursor:pointer;text-align:center}
  .store-btn:hover{transform:translateY(-2px)}
  .store-btn.selected{background:var(--select);color:#000}
  .store-detail{display:none;margin-top:10px;padding:12px;background:#fff;border-radius:10px;box-shadow:0 10px 28px rgba(0,0,0,0.06);text-align:left}
  .phone-link{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--call);color:#fff;font-weight:700;text-decoration:none}
  .map-link{display:inline-block;margin-left:8px;padding:8px 10px;border-radius:8px;border:1px solid #ddd;background:#fff;color:var(--navy);text-decoration:none;font-weight:700}
  .back-btn{margin-top:12px;padding:10px 14px;border-radius:10px;background:var(--muted);color:#fff;border:0;cursor:pointer}
  .qa-area{margin-top:12px;text-align:left}
  .qa-category{margin-bottom:12px;border-radius:10px;background:#fff;box-shadow:0 6px 12px rgba(0,0,0,0.04);overflow:hidden}
  .qa-cat-header{padding:10px 12px;display:flex;justify-content:space-between;cursor:pointer;font-weight:700}
  .qa-list{display:none;padding:10px}
  .qa-item{padding:8px;border-radius:8px;background:#fff;margin-bottom:8px;box-shadow:0 3px 8px rgba(0,0,0,0.03)}
  .qa-q{font-weight:700;cursor:pointer}
  .qa-a{display:none;margin-top:6px;color:#333}
  .calendar{display:grid;grid-template-columns:repeat(7,1fr);gap:8px;margin-top:12px}
  .calendar .day{background:var(--holiday);color:#fff;padding:10px;border-radius:10px;font-weight:700;text-align:center;border:0;cursor:pointer}
  .calendar .day.selected{background:var(--select);color:#000}
  @media(max-width:480px){ .calendar{grid-template-columns:repeat(4,1fr)} .store-grid{grid-template-columns:repeat(2,1fr)} }
</style>
</head>
<body>
<script>
  // QR 토큰 체크 (최상단에서 빠르게 차단)
  (function(){
    const params = new URLSearchParams(window.location.search);
    const token = params.get('token');
    const allowed = 'abcd1234';
    if(token !== allowed){
      document.documentElement.innerHTML = '<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>접근불가</title></head><body style="font-family:Arial,Helvetica,sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;"><div style="text-align:center;"><h2>접근 불가</h2><p>QR 코드로만 접속 가능합니다.</p></div></body>';
      throw new Error('Access denied - invalid token');
    }
  })();
</script>

<div class="wrap">
  <header>🚓 파주서 차량관리</header>

  <!-- EDITABLE: 배너 [] 안의 텍스트만 자주 수정 -->
  <div id="banner" class="banner">[10월] 월간점검현황 : 점검율 [20]% , 정비율 [30]%</div>

  <!-- MAIN MENU -->
  <div id="mainMenu" class="main-grid" style="display:grid">
    <button class="btn-main" onclick="openMenu('accident')">📞 사고접수</button>
    <button class="btn-main" onclick="openMenu('anicare')">🏪 애니카랜드</button>
    <button class="btn-main" onclick="openMenu('tire')">🛞 타이어</button>
    <button class="btn-main" onclick="openMenu('repair')">🔧 특장수리</button>
    <button class="btn-main" onclick="openMenu('qa')">❓ Q&A</button>
    <button class="btn-main btn-calendar" onclick="openMenu('chuseok')">📅 25추석(애니카)</button>
  </div>

  <!-- ACCIDENT -->
  <section id="accident" class="submenu">
    <div class="section-head">📞 사고접수</div>
    <div class="store-grid">
      <a class="store-btn" href="tel:15666881">삼성화재 1566-6881</a>
      <a class="store-btn" href="tel:15661228">애니카 긴급출동 1566-1228</a>
    </div>
    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

  <!-- ANICARE -->
  <section id="anicare" class="submenu">
    <div class="section-head">🏪 애니카랜드</div>
    <div class="store-grid" id="anicareGrid">
      <button class="store-btn" data-storeid="anicare1" onclick="toggleStore('anicare1')">금촌점</button>
      <button class="store-btn" data-storeid="anicare2" onclick="toggleStore('anicare2')">교하운정점</button>
      <button class="store-btn" data-storeid="anicare3" onclick="toggleStore('anicare3')">탄현점</button>
      <button class="store-btn" data-storeid="anicare4" onclick="toggleStore('anicare4')">조리점</button>
      <button class="store-btn" data-storeid="anicare5" onclick="toggleStore('anicare5')">교하점</button>
      <button class="store-btn" data-storeid="anicare6" onclick="toggleStore('anicare6')">문산점</button>
      <button class="store-btn" data-storeid="anicare7" onclick="toggleStore('anicare7')">법원점</button>
    </div>

    <!-- DETAILS (전화번호/주소, 네이버 링크로 변경) -->
    <div id="anicare1" class="store-detail">
      <a class="phone-link" href="tel:03153903562">📞 031-5390-3562</a>
      <div><small>경기 파주시 금촌동 420-1</small>
      <!-- MODIFIED: removed Google iframe → replaced with Naver map link to reduce traffic -->
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20금촌동%20420-1" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare2" class="store-detail">
      <a class="phone-link" href="tel:0319468300">📞 031-946-8300</a>
      <div><small>경기 파주시 운정역길 293</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20운정역길%20293" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare3" class="store-detail">
      <a class="phone-link" href="tel:03133191821">📞 031-3319-1821</a>
      <div><small>경기 파주시 탄현면 축현리 253-3</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20탄현면%20축현리%20253-3" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare4" class="store-detail">
      <a class="phone-link" href="tel:03165285353">📞 031-6528-5353</a>
      <div><small>경기 파주시 조리읍 장곡리 529-1</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20조리읍%20장곡리%20529-1" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare5" class="store-detail">
      <a class="phone-link" href="tel:0319572266">📞 031-957-2266</a>
      <div><small>경기 파주시 문발동 44-9</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20문발동%2044-9" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare6" class="store-detail">
      <a class="phone-link" href="tel:0319540951">📞 031-954-0951</a>
      <div><small>경기 파주시 문산읍 선유리 767-3</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20문산읍%20선유리%20767-3" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="anicare7" class="store-detail">
      <a class="phone-link" href="tel:0319599469">📞 031-959-9469</a>
      <div><small>경기 파주시 법원읍 법원리 422-70</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20법원읍%20법원리%20422-70" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

  <!-- TIRE -->
  <section id="tire" class="submenu">
    <div class="section-head">🛞 타이어</div>
    <div class="store-grid" id="tireGrid">
      <button class="store-btn" data-storeid="tire1" onclick="toggleStore('tire1')">더타이어샵 봉일천점</button>
      <button class="store-btn" data-storeid="tire2" onclick="toggleStore('tire2')">티스테이션 출판단지점</button>
      <button class="store-btn" data-storeid="tire3" onclick="toggleStore('tire3')">한국타이어 파주교하점</button>
    </div>

    <div id="tire1" class="store-detail">
      <a class="phone-link" href="tel:050788772848">📞 0507-8877-2848</a>
      <div><small>경기 파주시 조리읍 통일로 477-10</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20조리읍%20통일로%20477-10" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="tire2" class="store-detail">
      <a class="phone-link" href="tel:050741324321">📞 0507-4132-4321</a>
      <div><small>경기 파주시 산남로 98</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20산남로%2098" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <div id="tire3" class="store-detail">
      <a class="phone-link" href="tel:050724213319">📞 0507-2421-3319</a>
      <div><small>경기 파주시 천정구로 163-6</small>
      <a class="map-link" href="https://map.naver.com/v5/search/경기%20파주시%20천정구로%20163-6" target="_blank" rel="noopener">네이버지도 보기</a>
      </div>
    </div>

    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

  <!-- REPAIR -->
  <section id="repair" class="submenu">
    <div class="section-head">🔧 특장수리</div>
    <p>업체 정보는 추후 추가 가능합니다.</p>
    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

  <!-- Q&A -->
  <section id="qa" class="submenu">
    <div class="section-head">❓ Q&A</div>
    <div id="qaArea" class="qa-area"></div>
    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

  <!-- CHUSEOK -->
  <section id="chuseok" class="submenu">
    <div class="section-head">🍂 25년 추석연휴 (2025-10-03 ~ 2025-10-09)</div>
    <div class="calendar" role="list" aria-label="추석 달력">
      <button class="day" data-day="3" onclick="selectDay(this)">10/3</button>
      <button class="day" data-day="4" onclick="selectDay(this)">10/4</button>
      <button class="day" data-day="5" onclick="selectDay(this)">10/5</button>
      <button class="day" data-day="6" onclick="selectDay(this)">10/6</button>
      <button class="day" data-day="7" onclick="selectDay(this)">10/7</button>
      <button class="day" data-day="8" onclick="selectDay(this)">10/8</button>
      <button class="day" data-day="9" onclick="selectDay(this)">10/9</button>
    </div>
    <div id="chuseokStoreGrid" class="store-grid" style="margin-top:14px"></div>
    <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
  </section>

</div> <!-- wrap -->

<script>
/* ========== 데이터 (절대 수정하지 않을 항목들 그대로 유지) ========== */
const faqData = {
  blackbox: [
    { q:"블랙박스가 고장났어요", a:"순찰차량은 특장업체에 전화, 일반차량은 블박업체 AS신청" },
    { q:"블랙박스가 저장이 안되요", a:"차량담당에게 문의후 메모리카드 교체" }
  ],
  lift: [
    { q:"리프트가 고장났어요", a:"리프트옆쪽에 특장업체 전화번호 확인후 AS신청" }
  ],
  tire: [
    { q:"타이어가 마모되서 교체해야 해요", a:"타이어 메뉴에서 매장검색 가까운 매장 방문 교체" },
    { q:"타이어 옆이 터졌어요", a:"오래되서 터진것이 아닌것은 보험접수계 담당자에게 전화하삼" }
  ],
  microphone: [
    { q:"주먹마이크가 고장났어요", a:"주먹마이크 여분 확인 교체 또는 새로 구매후 교체" }
  ]
};

const anicareStores = [
  { id:'anicare1', name:'애니카랜드 금촌점', phoneDisplay:'031-5390-3562', phoneTel:'03153903562' },
  { id:'anicare2', name:'애니카랜드 교하운정점', phoneDisplay:'031-946-8300', phoneTel:'0319468300' },
  { id:'anicare3', name:'애니카랜드 탄현점', phoneDisplay:'031-3319-1821', phoneTel:'03133191821' },
  { id:'anicare4', name:'애니카랜드 조리점', phoneDisplay:'031-6528-5353', phoneTel:'03165285353' },
  { id:'anicare5', name:'애니카랜드 교하점', phoneDisplay:'031-957-2266', phoneTel:'0319572266' },
  { id:'anicare6', name:'애니카랜드 문산점', phoneDisplay:'031-954-0951', phoneTel:'0319540951' },
  { id:'anicare7', name:'애니카랜드 법원점', phoneDisplay:'031-959-9469', phoneTel:'0319599469' }
];

const tireStores = [
  { id:'tire1', name:'더타이어샵 봉일천점', phoneDisplay:'0507-8877-2848', phoneTel:'050788772848' },
  { id:'tire2', name:'티스테이션 출판단지점', phoneDisplay:'0507-4132-4321', phoneTel:'050741324321' },
  { id:'tire3', name:'한국타이어 파주교하점', phoneDisplay:'0507-2421-3319', phoneTel:'050724213319' }
];

const holidaySchedule = {
  '3': { anicare: ['anicare1', 'anicare2', 'anicare3'], tire: ['tire1', 'tire2' ] },
  '4': { anicare: ['anicare4'], tire: ['tire1', 'tire2', 'tire3'] },
  '5': { anicare: ['anicare2'], tire: ['tire1', 'tire2'] },
  '6': { anicare: ['anicare3'], tire: [] },
  '7': { anicare: ['anicare3'], tire: ['tire2'] },
  '8': { anicare: ['anicare4'], tire: ['tire1', 'tire2'] },
  '9': { anicare: ['anicare1'], tire: ['tire1', 'tire2', 'tire3'] }
};

/* ========== 유틸/렌더 (최소한의 코드로 유지) ========== */
function openMenu(id){
  document.getElementById('mainMenu').style.display='none';
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  const el=document.getElementById(id); if(el) el.style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}
function backToMain(){
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  document.getElementById('mainMenu').style.display='grid';
  window.scrollTo({top:0,behavior:'smooth'});
}

/* toggle store detail and selected btn */
function toggleStore(id){
  // hide other details, toggle this one
  document.querySelectorAll('.store-detail').forEach(d=>{
    d.style.display = (d.id===id && d.style.display!=='block') ? 'block' : 'none';
  });
  // update visual selected on any button with matching data-storeid
  document.querySelectorAll('.store-btn').forEach(b=> b.classList.remove('selected'));
  document.querySelectorAll('[data-storeid="'+id+'"]').forEach(b=> b.classList.add('selected'));
}

/* pick n random */
function pickRandom(arr,n){
  const c = arr.slice(), out = [];
  while(out.length < n && c.length){
    const i = Math.floor(Math.random() * c.length);
    out.push(c.splice(i,1)[0]);
  }
  return out;
}

/* show chuseok stores (uses holidaySchedule or random) */
function showChuseokStores(day){
  const grid = document.getElementById('chuseokStoreGrid'); grid.innerHTML='';
  const sched = holidaySchedule[day];
  let anicareToShow = [], tireToShow = [];
  if(sched && ((sched.anicare && sched.anicare.length) || (sched.tire && sched.tire.length))){
    if(sched.anicare) anicareToShow = sched.anicare.map(id => anicareStores.find(s=>s.id===id)).filter(Boolean);
    if(sched.tire) tireToShow = sched.tire.map(id => tireStores.find(s=>s.id===id)).filter(Boolean);
  } else {
    anicareToShow = pickRandom(anicareStores, Math.min(3, anicareStores.length));
    tireToShow = pickRandom(tireStores, Math.min(3, tireStores.length));
  }

  const header = document.createElement('div'); header.style.gridColumn='1/-1'; header.style.fontWeight='700'; header.style.textAlign='left'; header.style.padding='6px 0';
  header.textContent = `10/${day} 영업 매장 — 애니카 ${anicareToShow.length}곳 · 타이어 ${tireToShow.length}곳`; grid.appendChild(header);

  anicareToShow.forEach(s=>{
    const btn = document.createElement('button'); btn.className='store-btn'; btn.setAttribute('data-storeid', s.id);
    btn.textContent = `애니카 • ${s.name} (${s.phoneDisplay})`;
    btn.onclick = function(){ openMenu('anicare'); setTimeout(()=> toggleStore(s.id), 160); };
    grid.appendChild(btn);
  });

  tireToShow.forEach(s=>{
    const btn = document.createElement('button'); btn.className='store-btn'; btn.setAttribute('data-storeid', s.id);
    btn.textContent = `타이어 • ${s.name} (${s.phoneDisplay})`;
    btn.onclick = function(){ openMenu('tire'); setTimeout(()=> toggleStore(s.id), 160); };
    grid.appendChild(btn);
  });
}

/* calendar day selection (visual) */
function selectDay(btn){
  document.querySelectorAll('.calendar .day').forEach(d=>d.classList.remove('selected'));
  btn.classList.add('selected');
  showChuseokStores(btn.dataset.day);
}

/* render Q&A */
function renderFAQ(){
  const area = document.getElementById('qaArea'); area.innerHTML='';
  const categories = { blackbox:"📹 블랙박스", lift:"🛠 리프트", tire:"🛞 타이어", ids:"💡 IDS", microphone:"🎤 주먹마이크" };
  Object.keys(categories).forEach(key=>{
    const wrap = document.createElement('div'); wrap.className='qa-category';
    const header = document.createElement('div'); header.className='qa-cat-header'; header.innerHTML = `<div>${categories[key]}</div><div style="opacity:.7">▼</div>`;
    const list = document.createElement('div'); list.className='qa-list';
    const items = faqData[key] || [];
    if(items.length === 0){
      const note = document.createElement('div'); note.style.padding='10px'; note.style.color='#666'; note.style.background='#fff'; note.style.borderRadius='8px';
      note.textContent = '질문이 없습니다. faqData.' + key + ' 에 항목을 추가해 주세요.';
      list.appendChild(note);
    } else {
      items.forEach(it=>{
        const itemDiv = document.createElement('div'); itemDiv.className='qa-item';
        const qDiv = document.createElement('div'); qDiv.className='qa-q'; qDiv.textContent = 'Q. ' + it.q;
        const aDiv = document.createElement('div'); aDiv.className='qa-a'; aDiv.innerHTML = 'A. ' + it.a;
        qDiv.addEventListener('click', ()=> aDiv.style.display = (aDiv.style.display==='block')? 'none':'block');
        itemDiv.appendChild(qDiv); itemDiv.appendChild(aDiv); list.appendChild(itemDiv);
      });
    }
    header.addEventListener('click', ()=> list.style.display = list.style.display==='block' ? 'none' : 'block');
    wrap.appendChild(header); wrap.appendChild(list); area.appendChild(wrap);
  });
}

/* init */
function init(){
  renderFAQ();
  document.getElementById('mainMenu').style.display='grid';
  document.querySelectorAll('.submenu').forEach(s=> s.style.display='none');
  document.querySelectorAll('.store-detail').forEach(d=> d.style.display='none');
}
window.addEventListener('load', init);

/* expose for console editing if needed */
window.anicareStores = anicareStores;
window.tireStores = tireStores;
window.holidaySchedule = holidaySchedule;
window.faqData = faqData;
</script>
</body>
</html>
