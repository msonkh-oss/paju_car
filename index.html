<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>íŒŒì£¼ì„œ ì°¨ëŸ‰ê´€ë¦¬</title>

  <!-- í°íŠ¸ -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --navy-1: #041737;    /* ì§„í•œ ë„¤ì´ë¹„ (ë²„íŠ¼ ê¸°ë³¸) */
      --navy-2: #113a7a;    /* í˜¸ë²„/ê·¸ë¼ë°ì´ì…˜ */
      --muted:   #6b7280;
      --call:    #10b981;
      --calendar-red: #e63946;
      --ivory:   #fff;
    }

    html,body{height:100%; margin:0; padding:0;}
    body{
      font-family:'Noto Sans KR', -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      color:#111;
      background: url("https://upload.wikimedia.org/wikipedia/commons/2/2d/LAPD_Police_Car.jpg") no-repeat center center fixed;
      background-size: cover;
      position: relative;
    }

    /* ë°ì€ ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ -> ë²„íŠ¼/í…ìŠ¤íŠ¸ ê°€ë…ì„± í™•ë³´ */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(255,255,255,0.78);
      z-index: 0;
      pointer-events: none;
    }

    header{
      position: relative;
      z-index: 2;
      background: rgba(255,255,255,0.9);
      padding: 14px 12px;
      font-weight:700;
      font-size:1.3rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      text-align:center;
    }

    .container{
      position: relative;
      z-index: 2; /* overlay ì•„ë˜ì— ì½˜í…ì¸ ê°€ ì˜¤ì§€ ì•Šë„ë¡ */
      max-width: 920px;
      margin: 18px auto;
      padding: 0 14px 40px;
    }

    /* ë©”ì¸ ë²„íŠ¼ ê·¸ë¦¬ë“œ */
    .main-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap:14px;
      margin-top:14px;
    }
    .btn-main{
      display:flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      padding:14px 12px;
      border-radius:12px;
      color:var(--ivory);
      background: linear-gradient(180deg, var(--navy-1), var(--navy-2));
      box-shadow: 0 8px 18px rgba(12,35,80,0.12);
      border: none;
      cursor:pointer;
      font-weight:700;
      transition: transform .12s ease, box-shadow .12s ease;
      font-size:1rem;
      white-space:nowrap;
    }
    .btn-main:hover{ transform: translateY(-4px); box-shadow: 0 12px 26px rgba(12,35,80,0.16); }

    /* ë‹¬ë ¥ ë²„íŠ¼ (íœ´ì¼ ê°•ì¡°) */
    .calendar-btn{
      background: var(--calendar-red);
      color:#fff;
      padding:10px 6px;
      border-radius:10px;
      font-weight:700;
      border:none;
      cursor:pointer;
      box-shadow: 0 6px 14px rgba(230,57,70,0.18);
      transition: transform .12s;
    }
    .calendar-btn:hover{ transform: translateY(-3px); background:#d62828; }

    /* store grid and buttons */
    .store-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap:10px;
      margin-top:12px;
    }
    .store-btn{
      background: linear-gradient(180deg, #164a85, #0b2a4a);
      color:white;
      padding:10px 8px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 6px 16px rgba(10,30,60,0.12);
      transition: transform .12s;
      text-align:center;
      font-size:0.95rem;
    }
    .store-btn:hover{ transform: translateY(-3px); }

    .store-detail{
      display:none;
      background: #fff;
      padding:12px;
      margin-top:10px;
      border-radius:10px;
      box-shadow: 0 8px 22px rgba(0,0,0,0.06);
      text-align:left;
    }
    .phone-link{
      display:inline-block;
      background:var(--call);
      color:#fff;
      padding:8px 12px;
      border-radius:8px;
      text-decoration:none;
      font-weight:700;
      margin-bottom:8px;
    }
    .phone-link:hover{ background:#0e9e68; }

    iframe{ width:100%; height:220px; border:0; border-radius:8px; margin-top:8px; }

    .back-btn{
      display:inline-block;
      margin-top:12px;
      padding:9px 12px;
      border-radius:10px;
      background:var(--muted);
      color:#fff;
      font-weight:700;
      cursor:pointer;
      border:none;
    }
    .back-btn:hover{ background:#4b5563; }

    /* Q&A accordion */
    .qa-area{ text-align:left; margin-top:12px; }
    .qa-category{ margin-bottom:12px; }
    .qa-cat-header{
      background: #fff;
      padding:10px 12px;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 6px 12px rgba(0,0,0,0.04);
      display:flex; justify-content:space-between; align-items:center;
    }
    .qa-list{ display:none; padding-top:10px; }
    .qa-item{ background:#fff; padding:10px; border-radius:8px; margin-bottom:8px; box-shadow: 0 4px 10px rgba(0,0,0,0.04); }
    .qa-q{ font-weight:700; cursor:pointer; }
    .qa-a{ display:none; margin-top:6px; color:#333; }

    /* calendar layout */
    .calendar{
      display:grid;
      grid-template-columns: repeat(7, 1fr);
      gap:8px;
      margin-top:12px;
    }

    /* responsiveness */
    @media (max-width:480px){
      header{ font-size:1.1rem; padding:12px; }
      .main-grid{ gap:10px; }
      .btn-main{ padding:12px; font-size:0.95rem; }
      .calendar{ grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>
<script>
  // QR ì½”ë“œ í† í° ì²´í¬
  const allowedToken = "abcd1234"; // QR ì½”ë“œì— í¬í•¨ëœ í† í°
  const urlParams = new URLSearchParams(window.location.search);
  if(urlParams.get("token") !== allowedToken){
    document.body.innerHTML = "<h2 style='margin-top:50px;'>ì ‘ê·¼ ë¶ˆê°€</h2><p>QR ì½”ë“œë¡œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>";
  }
</script>
  <!-- overlay for readability -->
  <div class="overlay" aria-hidden="true"></div>

  <header>ğŸš“ íŒŒì£¼ì„œ ì°¨ëŸ‰ê´€ë¦¬</header>

  <div class="container">
    <!-- MAIN MENU -->
    <div id="mainMenu" class="main-grid" style="display:grid;">
      <button class="btn-main" onclick="openMenu('accident')">ğŸ“ ì‚¬ê³ ì ‘ìˆ˜</button>
      <button class="btn-main" onclick="openMenu('anicare')">ğŸª ì• ë‹ˆì¹´ëœë“œ</button>
      <button class="btn-main" onclick="openMenu('tire')">ğŸ› íƒ€ì´ì–´</button>
      <button class="btn-main" onclick="openMenu('repair')">ğŸ”§ íŠ¹ì¥ìˆ˜ë¦¬</button>
      <button class="btn-main" onclick="openMenu('qa')">â“ Q&A</button>
      <button class="btn-main" style="background:var(--calendar-red);" onclick="openMenu('chuseok')">ğŸ“… 25ì¶”ì„(ì• ë‹ˆì¹´)</button>
    </div>

    <!-- ACCIDENT -->
    <section id="accident" class="submenu" style="display:none;">
      <h2>ğŸ“ ì‚¬ê³ ì ‘ìˆ˜</h2>
      <div class="store-grid">
        <a class="store-btn" href="tel:15666881">ì‚¼ì„±í™”ì¬ 1566-6881</a>
        <a class="store-btn" href="tel:15661228">ì• ë‹ˆì¹´ ê¸´ê¸‰ì¶œë™ 1566-1228</a>
      </div>
      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>

    <!-- ANICARE (full list & details) -->
    <section id="anicare" class="submenu" style="display:none;">
      <h2>ğŸª ì• ë‹ˆì¹´ëœë“œ</h2>
      <div class="store-grid" id="anicareGrid">
        <div class="store-btn" onclick="toggleStore('anicare1')">ê¸ˆì´Œì </div>
        <div class="store-btn" onclick="toggleStore('anicare2')">êµí•˜ìš´ì •ì </div>
        <div class="store-btn" onclick="toggleStore('anicare3')">íƒ„í˜„ì </div>
        <div class="store-btn" onclick="toggleStore('anicare4')">ì¡°ë¦¬ì </div>
        <div class="store-btn" onclick="toggleStore('anicare5')">êµí•˜ì </div>
        <div class="store-btn" onclick="toggleStore('anicare6')">ë¬¸ì‚°ì </div>
        <div class="store-btn" onclick="toggleStore('anicare7')">ë²•ì›ì </div>
      </div>

      <!-- details (phone + map) -->
      <div id="anicare1" class="store-detail">
        <a class="phone-link" href="tel:0319431171">ğŸ“ 031-943-1171</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ê¸ˆì´Œë™ 420-1</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ê¸ˆì´Œë™+420-1&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare2" class="store-detail">
        <a class="phone-link" href="tel:0319468300">ğŸ“ 031-946-8300</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ìš´ì •ì—­ê¸¸ 293</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ìš´ì •ì—­ê¸¸+293&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare3" class="store-detail">
        <a class="phone-link" href="tel:0319421821">ğŸ“ 031-942-1821</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ íƒ„í˜„ë©´ ì¶•í˜„ë¦¬ 253-3</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+íƒ„í˜„ë©´+ì¶•í˜„ë¦¬+253-3&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare4" class="store-detail">
        <a class="phone-link" href="tel:0319655353">ğŸ“ 031-965-5353</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ì¡°ë¦¬ì ì¥ê³¡ë¦¬ 529-1</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ì¡°ë¦¬ì+ì¥ê³¡ë¦¬+529-1&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare5" class="store-detail">
        <a class="phone-link" href="tel:0319572266">ğŸ“ 031-957-2266</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ë¬¸ë°œë™ 44-9</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ë¬¸ë°œë™+44-9&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare6" class="store-detail">
        <a class="phone-link" href="tel:0319540951">ğŸ“ 031-954-0951</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ë¬¸ì‚°ì ì„ ìœ ë¦¬ 767-3</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ë¬¸ì‚°ì+ì„ ìœ ë¦¬+767-3&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare7" class="store-detail">
        <a class="phone-link" href="tel:0319599469">ğŸ“ 031-959-9469</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ë²•ì›ì ë²•ì›ë¦¬ 422-70</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ë²•ì›ì+ë²•ì›ë¦¬+422-70&output=embed" loading="lazy"></iframe>
      </div>

      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>

    <!-- TIRE -->
    <section id="tire" class="submenu" style="display:none;">
      <h2>ğŸ› íƒ€ì´ì–´</h2>
      <div class="store-grid" id="tireGrid">
        <div class="store-btn" onclick="toggleStore('tire1')">ë”íƒ€ì´ì–´ìƒµ ë´‰ì¼ì²œì </div>
        <div class="store-btn" onclick="toggleStore('tire2')">í‹°ìŠ¤í…Œì´ì…˜ ì¶œíŒë‹¨ì§€ì </div>
        <div class="store-btn" onclick="toggleStore('tire3')">í•œêµ­íƒ€ì´ì–´ íŒŒì£¼êµí•˜ì </div>
      </div>

      <div id="tire1" class="store-detail">
        <a class="phone-link" href="tel:050713852849">ğŸ“ 0507-1385-2849</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ì¡°ë¦¬ì í†µì¼ë¡œ 477-10</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ì¡°ë¦¬ì+í†µì¼ë¡œ+477-10&output=embed" loading="lazy"></iframe>
      </div>

      <div id="tire2" class="store-detail">
        <a class="phone-link" href="tel:050714771335">ğŸ“ 0507-1477-1335</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ì‚°ë‚¨ë¡œ 98</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ì‚°ë‚¨ë¡œ+98&output=embed" loading="lazy"></iframe>
      </div>

      <div id="tire3" class="store-detail">
        <a class="phone-link" href="tel:050714383340">ğŸ“ 0507-1438-3340</a>
        <div><small>ê²½ê¸° íŒŒì£¼ì‹œ ì²œì •êµ¬ë¡œ 163-6</small></div>
        <iframe src="https://www.google.com/maps?q=ê²½ê¸°+íŒŒì£¼ì‹œ+ì²œì •êµ¬ë¡œ+163-6&output=embed" loading="lazy"></iframe>
      </div>

      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>

    <!-- REPAIR -->
    <section id="repair" class="submenu" style="display:none;">
      <h2>ğŸ”§ íŠ¹ì¥ìˆ˜ë¦¬</h2>
      <p>ì—…ì²´ ì •ë³´ëŠ” ì¶”í›„ ì¶”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>

    <!-- Q&A -->
    <section id="qa" class="submenu" style="display:none;">
      <h2>â“ Q&A</h2>
      <div id="qaArea" class="qa-area"></div>
      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>

    <!-- CHUSEOK -->
    <section id="chuseok" class="submenu" style="display:none;">
      <h2>ğŸ‚ 25ë…„ ì¶”ì„ì—°íœ´ (2025-10-03 ~ 2025-10-09)</h2>

      <div class="calendar" role="list" aria-label="ì¶”ì„ ë‹¬ë ¥">
        <button class="calendar-btn" onclick="showChuseokStores('3')">10/3</button>
        <button class="calendar-btn" onclick="showChuseokStores('4')">10/4</button>
        <button class="calendar-btn" onclick="showChuseokStores('5')">10/5</button>
        <button class="calendar-btn" onclick="showChuseokStores('6')">10/6</button>
        <button class="calendar-btn" onclick="showChuseokStores('7')">10/7</button>
        <button class="calendar-btn" onclick="showChuseokStores('8')">10/8</button>
        <button class="calendar-btn" onclick="showChuseokStores('9')">10/9</button>
      </div>

      <div id="chuseokStoreGrid" class="store-grid" style="margin-top:14px;"></div>
      <button class="back-btn" onclick="backToMain()">â¬… ë’¤ë¡œ</button>
    </section>
  </div>

<script>
/* ---------------------------
  ë°ì´í„° ì˜ì—­ â€” ì—¬ê¸°ë§Œ ìˆ˜ì •í•˜ë©´ ë¨
  - faqData: Q&A ì¶”ê°€/ìˆ˜ì •
  - holidaySchedule: ë‚ ì§œë³„ ê³ ì • ë§¤ì¥ ID ì„¤ì • (anicare/tire arrays)
  - anicareStores / tireStores: ë§¤ì¥ ë¦¬ìŠ¤íŠ¸(ì¶”ê°€/ìˆ˜ì •)
----------------------------*/

/* Q&A ë”ë¯¸ ë°ì´í„° (ì¹´í…Œê³ ë¦¬ë³„) */
const faqData = {
  blackbox: [
    { q: "ë¸”ë™ë°•ìŠ¤ê°€ ê³ ì¥ë‚¬ì–´ìš”", a: "ìˆœì°°ì°¨ëŠ” íŠ¹ì¥ì—…ì²´ì— ì—°ë½í•´ì•¼ ë˜ìš”, ì¼ë°˜ê³µìš©ì°¨ëŸ‰ì€ ìƒˆë¡œ êµ¬ë§¤í•´ì„œ êµì²´í• ê»˜ìš”." },
    { q: "ì˜ìƒ ë³´ê´€ ê¸°ê°„ì€?", a: "ì—¬ê¸°ì— ë‹µë³€ì„ ì¶”ê°€í•˜ì„¸ìš”." }
  ],
  lift: [
    { q: "ë¦¬í”„íŠ¸ê°€ ê³ ì¥ë‚¬ì–´ìš”", a: "ë¦¬í”„íŠ¸ ì˜†ìª½ì— ì—…ì²´ëª…ì´ ë‚˜ì™€ìš” ì•Œë ¤ì£¼ì‹œë©´ ASë¶ˆëŸ¬ë“œë¦¼." }
  ],
  tire: [
    { q: "íƒ€ì´ì–´ê°€ ë§ˆëª¨ë˜ì„œ êµì²´í•´ì•¼ë˜ìš”", a: "íƒ€ì´ì–´ ë©”ë‰´ì— ê°€ì…”ì„œ ê°€ê¹Œìš´ê³³ì— ê°€ì„œ êµì²´í•˜ì‹¬ë¨" }
    { q: "íƒ€ì´ì–´ì˜†ì´ ì°¢ì–´ì ¸ì„œ ìœ„í—˜í•´ìš”", a: "ì˜†ì— ì°¢ì–´ì§„ê²ƒì€ ë³´í—˜ì²˜ë¦¬ í•´ì•¼ë˜ìš”, ìì°¨ë³´í—˜ ì ‘ìˆ˜ - ë°œìƒë³´ê³  ë° ì˜¨ë‚˜ë¼    ê³µë¬¸ ì˜¬ë ¤ì£¼ì„¸ìš”" }
  ],
  ids: [
    { q: "IDS ì—…ë°ì´íŠ¸ ë°©ë²•?", a: "ë‚˜ë‘ ëª¨ë¦„" }
  ],
  microphone: [
    { q: "ì£¼ë¨¹ë§ˆì´í¬ ê³ ì¥ë‚¬ì–´ìš”", a: "ì˜ˆë¹„ê°€ ìˆë‚˜ ì°¾ì•„ë³¼ê»˜ìš”. ì—†ìœ¼ë©´ í•˜ë‚˜ êµ¬ë§¤í•©ì‹œë‹¤." }
  ]
};

/* Anicare ë§¤ì¥ (IDëŠ” ìƒì„¸ ì—˜ë¦¬ë¨¼íŠ¸ idì™€ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤) */
const anicareStores = [
  { id:'anicare1', name:'ì• ë‹ˆì¹´ëœë“œ ê¸ˆì´Œì ', phone:'031-943-1171' },
  { id:'anicare2', name:'ì• ë‹ˆì¹´ëœë“œ êµí•˜ìš´ì •ì ', phone:'031-946-8300' },
  { id:'anicare3', name:'ì• ë‹ˆì¹´ëœë“œ íƒ„í˜„ì ', phone:'031-942-1821' },
  { id:'anicare4', name:'ì• ë‹ˆì¹´ëœë“œ ì¡°ë¦¬ì ', phone:'031-965-5353' },
  { id:'anicare5', name:'ì• ë‹ˆì¹´ëœë“œ êµí•˜ì ', phone:'031-957-2266' },
  { id:'anicare6', name:'ì• ë‹ˆì¹´ëœë“œ ë¬¸ì‚°ì ', phone:'031-954-0951' },
  { id:'anicare7', name:'ì• ë‹ˆì¹´ëœë“œ ë²•ì›ì ', phone:'031-959-9469' }
];

/* Tire ë§¤ì¥ (IDëŠ” ìƒì„¸ ì—˜ë¦¬ë¨¼íŠ¸ idì™€ ë°˜ë“œì‹œ ì¼ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤) */
const tireStores = [
  { id:'tire1', name:'ë”íƒ€ì´ì–´ìƒµ ë´‰ì¼ì²œì ', phone:'0507-1385-2849' },
  { id:'tire2', name:'í‹°ìŠ¤í…Œì´ì…˜ ì¶œíŒë‹¨ì§€ì ', phone:'0507-1477-1335' },
  { id:'tire3', name:'í•œêµ­íƒ€ì´ì–´ íŒŒì£¼êµí•˜ì ', phone:'0507-1438-3340' }
];

/* Holiday schedule: ë‚˜ì¤‘ì— ê³ ì • ë§¤ì¥ ì •í•˜ë©´ ID ë„£ì–´ë‘ë©´ ë¨.
   ì˜ˆ: holidaySchedule['3'] = { anicare:['anicare1','anicare3'], tire:['tire2'] };
   í˜„ì¬ëŠ” ëª¨ë“  ë‚ ì§œì— ë¹ˆ ë°°ì—´ -> ëœë¤ í‘œì‹œ ë™ì‘(ê¸°ë³¸) */
const holidaySchedule = {
  '3': { anicare: ['anicare1'], tire: ['tire2'] },
  '4': { anicare: ['anicare4'], tire: ['tire2', 'tire3'] },
  '5': { anicare: [], tire: ['tire2'] },
  '6': { anicare: [], tire: [] },
  '7': { anicare: [], tire: ['tire2'] },
  '8': { anicare: ['anicare4'], tire: ['tire2', 'tire1'] },
  '9': { anicare: ['anicare1'], tire: ['tire1', 'tire2', 'tire3'] }
};

/* ---------------------------
  ìœ í‹¸ë¦¬í‹° ë° ë Œë” í•¨ìˆ˜
----------------------------*/
function openMenu(id){
  document.getElementById('mainMenu').style.display='none';
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  const el = document.getElementById(id);
  if(el) el.style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}
function backToMain(){
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  document.getElementById('mainMenu').style.display='grid';
  window.scrollTo({top:0,behavior:'smooth'});
}

function toggleStore(id){
  document.querySelectorAll('.store-detail').forEach(d=>{
    if(d.id===id){
      d.style.display = (d.style.display==='block') ? 'none' : 'block';
      if(d.style.display==='block') d.scrollIntoView({behavior:'smooth', block:'center'});
    } else {
      d.style.display = 'none';
    }
  });
}

/* pick n random distinct items from arr */
function pickRandom(arr, n){
  const copy = arr.slice();
  const out = [];
  while(out.length < n && copy.length){
    const idx = Math.floor(Math.random()*copy.length);
    out.push(copy.splice(idx,1)[0]);
  }
  return out;
}

/* show chuseok stores for chosen day:
   - if holidaySchedule[day] has IDs, use them
   - otherwise pick random up to 3 each (anicare/tire)
   - clicking a store button opens corresponding menu + detail
*/
function showChuseokStores(day){
  const grid = document.getElementById('chuseokStoreGrid');
  grid.innerHTML = '';
  const sched = holidaySchedule[day];

  let anicareToShow = [], tireToShow = [];
  if (sched && ((sched.anicare && sched.anicare.length) || (sched.tire && sched.tire.length))){
    if (sched.anicare && sched.anicare.length) anicareToShow = sched.anicare.map(id => anicareStores.find(s=>s.id===id)).filter(Boolean);
    if (sched.tire && sched.tire.length) tireToShow = sched.tire.map(id => tireStores.find(s=>s.id===id)).filter(Boolean);
  } else {
    anicareToShow = pickRandom(anicareStores, Math.min(3, anicareStores.length));
    tireToShow = pickRandom(tireStores, Math.min(3, tireStores.length));
  }

  // header row
  const header = document.createElement('div');
  header.style.gridColumn = '1/-1';
  header.style.fontWeight = '700';
  header.style.textAlign = 'left';
  header.style.padding = '6px 0';
  header.textContent = `10/${day} ì˜ì—… ë§¤ì¥ â€” ì• ë‹ˆì¹´ ${anicareToShow.length}ê³³ Â· íƒ€ì´ì–´ ${tireToShow.length}ê³³`;
  grid.appendChild(header);

  anicareToShow.forEach(s=>{
    const btn = document.createElement('div');
    btn.className = 'store-btn';
    btn.textContent = `ì• ë‹ˆì¹´ â€¢ ${s.name} (${s.phone})`;
    btn.onclick = () => { openMenu('anicare'); setTimeout(()=> toggleStore(s.id), 160); };
    grid.appendChild(btn);
  });

  tireToShow.forEach(s=>{
    const btn = document.createElement('div');
    btn.className = 'store-btn';
    btn.textContent = `íƒ€ì´ì–´ â€¢ ${s.name} (${s.phone})`;
    btn.onclick = () => { openMenu('tire'); setTimeout(()=> toggleStore(s.id), 160); };
    grid.appendChild(btn);
  });
}

/* render FAQ area from faqData */
function renderFAQ(){
  const area = document.getElementById('qaArea');
  area.innerHTML = '';
  const categories = {
    blackbox: "ğŸ“¹ ë¸”ë™ë°•ìŠ¤",
    lift: "ğŸ›  ë¦¬í”„íŠ¸",
    tire: "ğŸ› íƒ€ì´ì–´",
    ids: "ğŸ’¡ IDS",
    microphone: "ğŸ¤ ì£¼ë¨¹ë§ˆì´í¬"
  };
  Object.keys(categories).forEach(key=>{
    const wrap = document.createElement('div'); wrap.className='qa-category';
    const header = document.createElement('div'); header.className='qa-cat-header';
    header.innerHTML = `<div>${categories[key]}</div><div style="opacity:.7">â–¼</div>`;
    const list = document.createElement('div'); list.className='qa-list';
    (faqData[key]||[]).forEach(item=>{
      const itemDiv = document.createElement('div'); itemDiv.className='qa-item';
      const qDiv = document.createElement('div'); qDiv.className='qa-q'; qDiv.textContent = 'Q. ' + item.q;
      const aDiv = document.createElement('div'); aDiv.className='qa-a'; aDiv.innerHTML = 'A. ' + item.a;
      qDiv.addEventListener('click', ()=> { aDiv.style.display = (aDiv.style.display==='block')? 'none':'block'; });
      itemDiv.appendChild(qDiv); itemDiv.appendChild(aDiv); list.appendChild(itemDiv);
    });
    if(!(faqData[key]||[]).length){
      const note = document.createElement('div');
      note.style.padding = '10px';
      note.style.color = '#666';
      note.style.background = '#fff';
      note.style.borderRadius = '8px';
      note.style.marginTop = '8px';
      note.textContent = 'ì§ˆë¬¸ì´ ì—†ìŠµë‹ˆë‹¤. faqData.' + key + ' ì— í•­ëª©ì„ ì¶”ê°€í•´ ì£¼ì„¸ìš”.';
      list.appendChild(note);
    }
    header.addEventListener('click', ()=> { list.style.display = (list.style.display==='block')? 'none':'block'; });
    wrap.appendChild(header); wrap.appendChild(list); area.appendChild(wrap);
  });
}

/* init */
function init(){
  renderFAQ();
  document.getElementById('mainMenu').style.display = 'grid';
  document.querySelectorAll('.submenu').forEach(s=> s.style.display = 'none');
  // ensure no store detail visible
  document.querySelectorAll('.store-detail').forEach(d => d.style.display = 'none');
}
window.addEventListener('load', init);

/* expose for quick console editing */
window.faqData = faqData;
window.holidaySchedule = holidaySchedule;
window.anicareStores = anicareStores;
window.tireStores = tireStores;
</script>
</body>
</html>
