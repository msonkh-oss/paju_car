<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>파주서 차량관리</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --navy-1:#041737;
      --navy-2:#113a7a;
      --muted:#6b7280;
      --call:#10b981;
      --calendar-red:#e63946;
      --overlay-rgba: rgba(255,255,255,0.88);
    }
    html,body{height:100%; margin:0; padding:0;}
    body{
      font-family:'Noto Sans KR', -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
      background: url("https://upload.wikimedia.org/wikipedia/commons/2/2d/LAPD_Police_Car.jpg") no-repeat center center fixed;
      background-size: cover;
      color:#111;
      -webkit-text-size-adjust:100%;
    }

    /* immediate overlay to ensure readability */
    .overlay { position:fixed; inset:0; background: var(--overlay-rgba); z-index:0; }

    header{
      position:relative; z-index:2; background: rgba(255,255,255,0.98);
      padding:14px; text-align:center; font-weight:700; font-size:1.25rem;
      box-shadow:0 4px 12px rgba(0,0,0,0.06);
    }
    .container{ position:relative; z-index:2; max-width:920px; margin:18px auto; padding:0 14px 40px; }

    /* main grid */
    .main-grid{
      display:grid; gap:14px; margin-top:14px;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    }
    .btn-main{
      display:flex; align-items:center; justify-content:center; gap:8px;
      padding:14px 12px; border-radius:12px;
      color:white; font-weight:700; cursor:pointer;
      background: linear-gradient(180deg,var(--navy-1),var(--navy-2));
      box-shadow: 0 10px 22px rgba(12,35,80,0.12);
      border: none; transition: transform .12s ease;
      font-size:1rem;
    }

    .btn-calendar{ background: var(--calendar-red); color:#fff; }

    .submenu { display:none; margin-top:12px; }

    /* store grid & buttons */
    .store-grid{
      display:grid; gap:10px; margin-top:12px;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    }
    .store-btn{
      background: linear-gradient(180deg,#164a85,#0b2a4a);
      color:#fff; padding:10px; border-radius:10px; font-weight:700; cursor:pointer;
      box-shadow:0 8px 20px rgba(10,30,60,0.12); border:none; text-align:center;
    }
    .store-detail{
      display:none; background:#fff; padding:12px; margin-top:10px; border-radius:10px;
      box-shadow: 0 10px 28px rgba(0,0,0,0.06); text-align:left;
    }
    .phone-link{ display:inline-block; background:var(--call); color:#fff; padding:8px 12px; border-radius:8px; text-decoration:none; font-weight:700; }

    iframe{ width:100%; height:220px; border:0; border-radius:8px; margin-top:8px; }

    .back-btn{ margin-top:12px; padding:10px 14px; border-radius:10px; background:var(--muted); color:#fff; font-weight:700; border:none; cursor:pointer;}

    /* Q&A */
    .qa-area{ text-align:left; margin-top:12px; }
    .qa-category{ margin-bottom:12px; border-radius:10px; overflow:hidden; box-shadow:0 6px 12px rgba(0,0,0,0.04); background:#fff; }
    .qa-cat-header{ padding:10px 12px; display:flex; justify-content:space-between; cursor:pointer; font-weight:700; }
    .qa-list{ display:none; padding:10px; }
    .qa-item{ padding:8px; border-radius:8px; background:#fff; margin-bottom:8px; box-shadow:0 3px 8px rgba(0,0,0,0.03); }
    .qa-q{ font-weight:700; cursor:pointer; }
    .qa-a{ display:none; margin-top:6px; color:#333; }

    /* calendar */
    .calendar{ display:grid; grid-template-columns: repeat(7, 1fr); gap:8px; margin-top:12px; }
    .calendar .day{ background:var(--calendar-red); color:#fff; padding:10px; border-radius:10px; font-weight:700; text-align:center; cursor:pointer; border:none; }

    @media (max-width:480px){
      header{ font-size:1.05rem; padding:12px; }
      .btn-main{ padding:12px; font-size:0.95rem; }
      .calendar{ grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>
  <!-- QR 토큰 체크: 최상단에서 빠르게 차단 -->
  <script>
    (function(){
      const params = new URLSearchParams(window.location.search);
      const token = params.get('token');
      const allowed = 'abcd1234';
      if(token !== allowed){
        document.documentElement.innerHTML = '<head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>접근불가</title></head><body style="font-family:Arial,sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;"><div style="text-align:center;"><h2>접근 불가</h2><p>QR 코드로만 접속 가능합니다.</p></div></body>';
        // stop further execution
        throw new Error('Access denied - invalid token');
      }
    })();
  </script>

  <div class="overlay" aria-hidden="true"></div>

  <header>🚓 파주서 차량관리</header>

  <div class="container">

    <!-- MAIN MENU -->
    <div id="mainMenu" class="main-grid" style="display:grid;">
      <button class="btn-main" onclick="openMenu('accident')">📞 사고접수</button>
      <button class="btn-main" onclick="openMenu('anicare')">🏪 애니카랜드</button>
      <button class="btn-main" onclick="openMenu('tire')">🛞 타이어</button>
      <button class="btn-main" onclick="openMenu('repair')">🔧 특장수리</button>
      <button class="btn-main" onclick="openMenu('qa')">❓ Q&A</button>
      <button class="btn-main btn-calendar" onclick="openMenu('chuseok')">📅 25추석(애니카)</button>
    </div>

    <!-- 사고접수 -->
    <section id="accident" class="submenu">
      <h2>📞 사고접수</h2>
      <div class="store-grid">
        <a class="store-btn" href="tel:15666881">삼성화재 1566-6881</a>
        <a class="store-btn" href="tel:15661228">애니카 긴급출동    1566-1228</a>
      </div>
      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>

    <!-- 애니카랜드 (7곳) -->
    <section id="anicare" class="submenu">
      <h2>🏪 애니카랜드</h2>
      <div class="store-grid" id="anicareGrid">
        <button class="store-btn" onclick="toggleStore('anicare1')">금촌점</button>
        <button class="store-btn" onclick="toggleStore('anicare2')">교하운정점</button>
        <button class="store-btn" onclick="toggleStore('anicare3')">탄현점</button>
        <button class="store-btn" onclick="toggleStore('anicare4')">조리점</button>
        <button class="store-btn" onclick="toggleStore('anicare5')">교하점</button>
        <button class="store-btn" onclick="toggleStore('anicare6')">문산점</button>
        <button class="store-btn" onclick="toggleStore('anicare7')">법원점</button>
      </div>

      <!-- details: 전화번호는 '031'로 시작 (표시: 하이픈 포함, tel:에는 숫자만) -->
      <div id="anicare1" class="store-detail">
        <a class="phone-link" href="tel:03153903562">📞 031-5390-3562</a>
        <div><small>경기 파주시 금촌동 420-1</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+금촌동+420-1&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare2" class="store-detail">
        <a class="phone-link" href="tel:0319468300">📞 031-946-8300</a>
        <div><small>경기 파주시 운정역길 293</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+운정역길+293&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare3" class="store-detail">
        <a class="phone-link" href="tel:03133191821">📞 031-3319-1821</a>
        <div><small>경기 파주시 탄현면 축현리 253-3</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+탄현면+축현리+253-3&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare4" class="store-detail">
        <a class="phone-link" href="tel:03165285353">📞 031-6528-5353</a>
        <div><small>경기 파주시 조리읍 장곡리 529-1</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+조리읍+장곡리+529-1&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare5" class="store-detail">
        <a class="phone-link" href="tel:0319572266">📞 031-957-2266</a>
        <div><small>경기 파주시 문발동 44-9</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+문발동+44-9&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare6" class="store-detail">
        <a class="phone-link" href="tel:0319540951">📞 031-954-0951</a>
        <div><small>경기 파주시 문산읍 선유리 767-3</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+문산읍+선유리+767-3&output=embed" loading="lazy"></iframe>
      </div>

      <div id="anicare7" class="store-detail">
        <a class="phone-link" href="tel:0319599469">📞 031-959-9469</a>
        <div><small>경기 파주시 법원읍 법원리 422-70</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+법원읍+법원리+422-70&output=embed" loading="lazy"></iframe>
      </div>

      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>

    <!-- 타이어 (전화번호는 0507로 시작) -->
    <section id="tire" class="submenu">
      <h2>🛞 타이어</h2>
      <div class="store-grid" id="tireGrid">
        <button class="store-btn" onclick="toggleStore('tire1')">더타이어샵 봉일천점</button>
        <button class="store-btn" onclick="toggleStore('tire2')">티스테이션 출판단지점</button>
        <button class="store-btn" onclick="toggleStore('tire3')">한국타이어 파주교하점</button>
      </div>

      <div id="tire1" class="store-detail">
        <a class="phone-link" href="tel:050788772848">📞 0507-8877-2848</a>
        <div><small>경기 파주시 조리읍 통일로 477-10</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+조리읍+통일로+477-10&output=embed" loading="lazy"></iframe>
      </div>

      <div id="tire2" class="store-detail">
        <a class="phone-link" href="tel:050741324321">📞 0507-4132-4321</a>
        <div><small>경기 파주시 산남로 98</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+산남로+98&output=embed" loading="lazy"></iframe>
      </div>

      <div id="tire3" class="store-detail">
        <a class="phone-link" href="tel:050724213319">📞 0507-2421-3319</a>
        <div><small>경기 파주시 천정구로 163-6</small></div>
        <iframe src="https://www.google.com/maps?q=경기+파주시+천정구로+163-6&output=embed" loading="lazy"></iframe>
      </div>

      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>

    <!-- 특장수리 -->
    <section id="repair" class="submenu">
      <h2>🔧 특장수리</h2>
      <p>업체 정보는 추후 추가 가능합니다.</p>
      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>

    <!-- Q&A -->
    <section id="qa" class="submenu">
      <h2>❓ Q&A</h2>
      <div id="qaArea" class="qa-area"></div>
      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>

    <!-- 추석 달력 -->
    <section id="chuseok" class="submenu">
      <h2>🍂 25년 추석연휴 (2025-10-03 ~ 2025-10-09)</h2>
      <div class="calendar" role="list" aria-label="추석 달력">
        <button class="day" onclick="showChuseokStores('3')">10/3</button>
        <button class="day" onclick="showChuseokStores('4')">10/4</button>
        <button class="day" onclick="showChuseokStores('5')">10/5</button>
        <button class="day" onclick="showChuseokStores('6')">10/6</button>
        <button class="day" onclick="showChuseokStores('7')">10/7</button>
        <button class="day" onclick="showChuseokStores('8')">10/8</button>
        <button class="day" onclick="showChuseokStores('9')">10/9</button>
      </div>

      <div id="chuseokStoreGrid" class="store-grid" style="margin-top:14px;"></div>
      <button class="back-btn" onclick="backToMain()">⬅ 뒤로</button>
    </section>
  </div> <!-- container -->

<script>
/* ================================
   데이터 — 여기만 수정하세요
   ================================ */
const faqData = {
  blackbox: [
    { q:"블랙박스가 고장났어요", a:"순찰차량은 특장업체에 전화, 일반차량은 블박업체 AS신청" },
    { q:"블랙박스가 저장이 안되요", a:"차량담당에게 문의후 메모리카드 교체" }
  ],
  lift: [
    { q:"리프트가 고장났어요", a:"리프트옆쪽에 특장업체 전화번호 확인후 AS신청" }
  ],
  tire: [
    { q:"타이어가 마모되서 교체해야 해요", a:"타이어 메뉴에서 매장검색 가까운 매장 방문 교체" },
    { q:"타이어 옆이 터졌어요", a:"오래되서 터진것이 아닌것은 보험접수계 담당자에게 전화하삼" }
  ],
  microphone: [
    { q:"주먹마이크가 고장났어요", a:"주먹마이크 여분 확인 교체 또는 새로 구매후 교체" }
  ]
};

const anicareStores = [
  { id:'anicare1', name:'애니카랜드 금촌점', phoneDisplay:'031-5390-3562', phoneTel:'03153903562' },
  { id:'anicare2', name:'애니카랜드 교하운정점', phoneDisplay:'031-946-8300', phoneTel:'0319468300' },
  { id:'anicare3', name:'애니카랜드 탄현점', phoneDisplay:'031-3319-1821', phoneTel:'03133191821' },
  { id:'anicare4', name:'애니카랜드 조리점', phoneDisplay:'031-6528-5353', phoneTel:'03165285353' },
  { id:'anicare5', name:'애니카랜드 교하점', phoneDisplay:'031-957-2266', phoneTel:'0319572266' },
  { id:'anicare6', name:'애니카랜드 문산점', phoneDisplay:'031-954-0951', phoneTel:'0319540951' },
  { id:'anicare7', name:'애니카랜드 법원점', phoneDisplay:'031-959-9469', phoneTel:'0319599469' }
];

const tireStores = [
  { id:'tire1', name:'더타이어샵 봉일천점', phoneDisplay:'0507-8877-2848', phoneTel:'050788772848' },
  { id:'tire2', name:'티스테이션 출판단지점', phoneDisplay:'0507-4132-4321', phoneTel:'050741324321' },
  { id:'tire3', name:'한국타이어 파주교하점', phoneDisplay:'0507-2421-3319', phoneTel:'050724213319' }
  { id:'tire4', name:'휴무' }
];

// holidaySchedule: 날짜별 고정 매장 연결. 빈 배열 => 랜덤 표시
const holidaySchedule = {
  '3': { anicare: ['anicare1', 'anicare2', 'anicare3'], tire: ['tire1', 'tire2' ] },
  '4': { anicare: ['anicare4'], tire: ['tire1', 'tire2', 'tire3'] },
  '5': { anicare: ['anicare2'], tire: ['tire1', 'tire2'] },
  '6': { anicare: ['anicare3'], tire: ['tire4'] },
  '7': { anicare: ['anicare3'], tire: ['tire2'] },
  '8': { anicare: ['anicare4'], tire: ['tire1', 'tire2'] },
  '9': { anicare: ['anicare1'], tire: ['tire1', 'tire2', 'tire3'] }
};

/* ================================
   렌더/유틸 (수정 불필요)
   ================================ */
function openMenu(id){
  document.getElementById('mainMenu').style.display='none';
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  const el = document.getElementById(id);
  if(el) el.style.display='block';
  window.scrollTo({top:0,behavior:'smooth'});
}
function backToMain(){
  document.querySelectorAll('.submenu').forEach(s=>s.style.display='none');
  document.getElementById('mainMenu').style.display='grid';
  window.scrollTo({top:0,behavior:'smooth'});
}
function toggleStore(id){
  document.querySelectorAll('.store-detail').forEach(d=>{
    if(d.id === id){
      d.style.display = (d.style.display === 'block') ? 'none' : 'block';
      if(d.style.display==='block') d.scrollIntoView({behavior:'smooth', block:'center'});
    } else {
      d.style.display = 'none';
    }
  });
}
function pickRandom(arr,n){
  const copy = arr.slice(); const out=[];
  while(out.length<n && copy.length){
    const idx = Math.floor(Math.random()*copy.length);
    out.push(copy.splice(idx,1)[0]);
  }
  return out;
}
function showChuseokStores(day){
  const grid = document.getElementById('chuseokStoreGrid'); grid.innerHTML='';
  const sched = holidaySchedule[day];
  let anicareToShow=[], tireToShow=[];
  if(sched && ((sched.anicare && sched.anicare.length) || (sched.tire && sched.tire.length))){
    if(sched.anicare && sched.anicare.length) anicareToShow = sched.anicare.map(id=> anicareStores.find(s=>s.id===id)).filter(Boolean);
    if(sched.tire && sched.tire.length) tireToShow = sched.tire.map(id=> tireStores.find(s=>s.id===id)).filter(Boolean);
  } else {
    anicareToShow = pickRandom(anicareStores, Math.min(3, anicareStores.length));
    tireToShow = pickRandom(tireStores, Math.min(3, tireStores.length));
  }

  const header = document.createElement('div');
  header.style.gridColumn='1/-1'; header.style.fontWeight='700'; header.style.textAlign='left'; header.style.padding='6px 0';
  header.textContent = `10/${day} 영업 매장 — 애니카 ${anicareToShow.length}곳 · 타이어 ${tireToShow.length}곳`;
  grid.appendChild(header);

  anicareToShow.forEach(s=>{
    const btn = document.createElement('button'); btn.className='store-btn';
    btn.textContent = `애니카 • ${s.name} (${s.phoneDisplay})`;
    btn.onclick = ()=>{ openMenu('anicare'); setTimeout(()=> toggleStore(s.id),160); };
    grid.appendChild(btn);
  });
  tireToShow.forEach(s=>{
    const btn = document.createElement('button'); btn.className='store-btn';
    btn.textContent = `타이어 • ${s.name} (${s.phoneDisplay})`;
    btn.onclick = ()=>{ openMenu('tire'); setTimeout(()=> toggleStore(s.id),160); };
    grid.appendChild(btn);
  });
}

/* Q&A 렌더링 */
function renderFAQ(){
  const area = document.getElementById('qaArea'); area.innerHTML='';
  const categories = { blackbox:"📹 블랙박스", lift:"🛠 리프트", tire:"🛞 타이어", ids:"💡 IDS", microphone:"🎤 주먹마이크" };
  Object.keys(categories).forEach(key=>{
    const wrap = document.createElement('div'); wrap.className='qa-category';
    const header = document.createElement('div'); header.className='qa-cat-header'; header.innerHTML=`<div>${categories[key]}</div><div style="opacity:.7">▼</div>`;
    const list = document.createElement('div'); list.className='qa-list';
    (faqData[key]||[]).forEach(item=>{
      const itemDiv = document.createElement('div'); itemDiv.className='qa-item';
      const qDiv = document.createElement('div'); qDiv.className='qa-q'; qDiv.textContent='Q. '+item.q;
      const aDiv = document.createElement('div'); aDiv.className='qa-a'; aDiv.innerHTML='A. '+item.a;
      qDiv.addEventListener('click', ()=> aDiv.style.display = (aDiv.style.display==='block')? 'none':'block' );
      itemDiv.appendChild(qDiv); itemDiv.appendChild(aDiv); list.appendChild(itemDiv);
    });
    if(!(faqData[key]||[]).length){
      const note=document.createElement('div'); note.style.padding='10px'; note.style.color='#666'; note.style.background='#fff'; note.style.borderRadius='8px'; note.style.marginTop='8px';
      note.textContent = '질문이 없습니다. faqData.'+key+' 에 항목을 추가해 주세요.';
      list.appendChild(note);
    }
    header.addEventListener('click', ()=> list.style.display = (list.style.display==='block')? 'none':'block' );
    wrap.appendChild(header); wrap.appendChild(list); area.appendChild(wrap);
  });
}

function init(){
  renderFAQ();
  document.getElementById('mainMenu').style.display='grid';
  document.querySelectorAll('.submenu').forEach(s=> s.style.display='none');
  document.querySelectorAll('.store-detail').forEach(d=> d.style.display='none');
}
window.addEventListener('load', init);

/* 편의: 외부에서 데이터 접근 가능 */
window.anicareStores = anicareStores;
window.tireStores = tireStores;
window.holidaySchedule = holidaySchedule;
window.faqData = faqData;
</script>
</body>
</html>


